<Prefab>
  <Constants>
    <Constant Name="PartyRow.Height" Value="34" />
    <Constant Name="PartyRow.Spacing" Value="15" />
  </Constants>
  <Parameters>
    <Parameter Name="DataSource" DefaultValue="" />
  </Parameters>
  <Window>
	<Widget DataSource="*DataSource" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" HorizontalAlignment="Center" VerticalAlignment="Center" Sprite="BlankWhiteSquare_9" Color="#000000FF" AlphaFactor="0.75">
	  <Children>
		<DimensionSyncWidget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="650" DimensionToSync="Vertical" HorizontalAlignment="Center" VerticalAlignment="Center" WidgetToCopyHeightFrom="InnerPanel">
		  <Children>
			<Widget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" ClipContents="true">
			  <Children>
				<Widget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" HorizontalAlignment="Center" VerticalAlignment="Top" Sprite="StdAssets\Popup\canvas" />
			  </Children>
			</Widget>
			<ListPanel Id="InnerPanel" WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" StackLayout.LayoutMethod="VerticalBottomToTop" MarginLeft="15" MarginRight="15">
			  <Children>
				<ListPanel WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" StackLayout.LayoutMethod="VerticalBottomToTop" MarginBottom="5">
				  <Children>
					<!--Title-->
					<AutoHideRichTextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" MarginTop="10" Brush="Popup.Title.Text" MinHeight="50" Text="@TitleText" WidgetToHideIfEmpty="..\TitleDivider" />
					
					<ListPanel WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" MarginTop="15" UpdateChildrenStates="true" StackLayout.LayoutMethod="HorizontalLeftToRight">
						<Children>
							<!-- Clear Queue -->
							<Widget WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" HorizontalAlignment='Left' UpdateChildrenStates='true'>
								<Children>
									<ButtonWidget DoNotPassEventsToChildren='true' WidthSizePolicy='Fixed' HeightSizePolicy='Fixed' SuggestedWidth="225" SuggestedHeight='40' Brush='ButtonBrush2' UpdateChildrenStates='true' Command.Click='ClearQueue'>
										<Children>
											<TextWidget WidthSizePolicy='CoverChildren' HeightSizePolicy='StretchToParent' HorizontalAlignment="Center" Brush='Kingdom.GeneralButtons.Text' Text='@ClearQueueText' />
										</Children>
									</ButtonWidget>
								</Children>
							</Widget>
							
							<!-- Create Order -->
							<Widget WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" HorizontalAlignment='Right' UpdateChildrenStates='true' MarginLeft="170" >
								<Children>
									<ButtonWidget DoNotPassEventsToChildren='true' WidthSizePolicy='Fixed' HeightSizePolicy='Fixed' SuggestedWidth="225" SuggestedHeight='40' Brush='ButtonBrush2' UpdateChildrenStates='true' Command.Click='AddOrder'>
										<Children>
											<TextWidget WidthSizePolicy='CoverChildren' HeightSizePolicy='StretchToParent' HorizontalAlignment="Center" Brush='Kingdom.GeneralButtons.Text' Text='@AddOrderText' />
										</Children>
									</ButtonWidget>
								</Children>
							</Widget>
						</Children>
					</ListPanel>

					<!--Divider-->
					<Widget Id="TitleDivider" WidthSizePolicy="StretchToParent" HeightSizePolicy="Fixed" SuggestedHeight="23" Sprite="StdAssets\Popup\divider" />
				  </Children>
				</ListPanel>

				<!--List and Scrollbar horizontal list-->
				<ListPanel WidthSizePolicy="CoverChildren" HeightSizePolicy="Fixed" SuggestedHeight="500" HorizontalAlignment="Center">
				  <Children>
					<!--Clan List Scrollable Panel-->
					<ScrollablePanel WidthSizePolicy="CoverChildren" HeightSizePolicy="StretchToParent" MarginLeft="3" MarginBottom="3" AutoHideScrollBars="true" ClipRect="OrderListClipRect" InnerPanel="OrderListClipRect\OrderList" VerticalScrollbar="..\OrderListScrollbar\Scrollbar">
					  <Children>
						<NavigationScopeTargeter ScopeID="PartyAIControlsPanelItemsContext" ScopeParent="..\OrderListClipRect" ScopeMovements="Vertical" />
						<Widget Id="OrderListClipRect" WidthSizePolicy="CoverChildren" HeightSizePolicy="StretchToParent" ClipContents="true">
						  <Children>
							<NavigatableListPanel Id="OrderList" DataSource="{OrderList}" WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" StackLayout.LayoutMethod="VerticalBottomToTop">
							  <ItemTemplate>
								  <ListPanel WidthSizePolicy="CoverChildren" HeightSizePolicy="Fixed" SuggestedHeight="!PartyRow.Height" MarginTop="!PartyRow.Spacing" UpdateChildrenStates="true" StackLayout.LayoutMethod="HorizontalLeftToRight">
									<Children>
										<!-- Move Up -->
										<Widget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="!PartyRow.Height" SuggestedHeight="!PartyRow.Height" HorizontalAlignment="Left" >
											<Children>
												<ButtonWidget DoNotPassEventsToChildren="true" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" UpdateChildrenStates="true" Command.Click='MoveUp' IsEnabled="@CanMoveUp" IsVisible="@IsEnabled">
												  <Children>
													<HintWidget DataSource="{MoveUpHint}" WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" Command.HoverBegin="ExecuteBeginHint" Command.HoverEnd="ExecuteEndHint" />
													<BrushWidget Id="MoveUpBrush" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="!PartyRow.Height" SuggestedHeight="!PartyRow.Height" HorizontalAlignment="Right" VerticalAlignment="Center" Brush="PartyAI.Menu.UpArrow" />
												  </Children>
												</ButtonWidget>
											</Children>
										</Widget>
										
										<!-- Move Down -->	
										<Widget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="!PartyRow.Height" SuggestedHeight="!PartyRow.Height" HorizontalAlignment="Left" >
											<Children>
												<ButtonWidget DoNotPassEventsToChildren="true" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" UpdateChildrenStates="true" Command.Click='MoveDown' IsEnabled="@CanMoveDown" IsVisible="@IsEnabled">
												  <Children>
													<HintWidget DataSource="{MoveDownHint}" WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" Command.HoverBegin="ExecuteBeginHint" Command.HoverEnd="ExecuteEndHint" />
													<BrushWidget Id="MoveDownBrush" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="!PartyRow.Height" SuggestedHeight="!PartyRow.Height" HorizontalAlignment="Right" VerticalAlignment="Center" Brush="PartyAI.Menu.DownArrow" />
												  </Children>
												</ButtonWidget>
											</Children>
										</Widget>
									
										<TextWidget WidthSizePolicy="Fixed" HeightSizePolicy="StretchToParent" SuggestedWidth="500" HorizontalAlignment="Left" VerticalAlignment="Bottom" Brush="PartyAI.Menu.PartyRowText" MarginLeft="10" Text="@OrderType"/>
										
										<!-- Delete Order -->
										<Widget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="25" SuggestedHeight="25" HorizontalAlignment="Right" MarginTop="5" MarginRight="5" >
											<Children>
												<ButtonWidget DoNotPassEventsToChildren="true" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" UpdateChildrenStates="true" Command.Click='DeleteOrder' IsEnabled="@IsEnabled" IsVisible="@IsEnabled">
												  <Children>
													<HintWidget DataSource="{ChangeHint}" WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" Command.HoverBegin="ExecuteBeginHint" Command.HoverEnd="ExecuteEndHint" />
													<BrushWidget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="25" SuggestedHeight="25" HorizontalAlignment="Right" VerticalAlignment="Center" Brush="SaveLoad.DeleteSave.Button" />
												  </Children>
												</ButtonWidget>
											</Children>
										</Widget>
									</Children>
								  </ListPanel>
							  </ItemTemplate>
							</NavigatableListPanel>
						  </Children>
						</Widget>

					  </Children>
					</ScrollablePanel>

					<Standard.VerticalScrollbar Id="OrderListScrollbar" HeightSizePolicy="StretchToParent" HorizontalAlignment="Right" MarginRight="2" MarginLeft="2" MarginBottom="3" />
				  </Children>
				</ListPanel>

				<ListPanel WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" HorizontalAlignment="Center" MarginTop="20" StackLayout.LayoutMethod="HorizontalLeftToRight">
				  <Children>
					<ToggleButtonWidget DoNotPassEventsToChildren="true" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="251" SuggestedHeight="64" HorizontalAlignment="Right" VerticalAlignment="Center" Brush="Popup.Done.Button" Command.Click="DoneOrderQueue" GamepadNavigationIndex="1">
					  <Children>
						<TextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" Brush="Popup.Button.Text" Text="@AcceptText" MarginLeft="40" MarginRight="40"/>
					  </Children>
					</ToggleButtonWidget>
				  </Children>
				</ListPanel>
			  </Children>
			</ListPanel>
			<!--Frame Border-->
			<BrushWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" Brush="Popup.Frame" IsEnabled="false" />
		  </Children>
		</DimensionSyncWidget>
	  </Children>
	</Widget>
  </Window>
</Prefab>
