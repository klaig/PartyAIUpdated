<Prefab>
  <Constants>
    <Constant Name="PartyRow.Height" Value="34" />
    <Constant Name="PartyRow.Spacing" Value="15" />
  </Constants>
  <Parameters>
    <Parameter Name="DataSource" DefaultValue="" />
  </Parameters>
  <Window>
	<Widget DataSource="*DataSource" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" HorizontalAlignment="Center" VerticalAlignment="Center" Sprite="BlankWhiteSquare_9" Color="#000000FF" AlphaFactor="0.75">
	  <Children>
		<DimensionSyncWidget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="945" DimensionToSync="Vertical" HorizontalAlignment="Center" VerticalAlignment="Center" WidgetToCopyHeightFrom="SlidersWindowInnerPanel">
		  <Children>
			<Widget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" ClipContents="true">
			  <Children>
				<Widget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" HorizontalAlignment="Center" VerticalAlignment="Top" Sprite="StdAssets\Popup\canvas" />
			  </Children>
			</Widget>
			<ListPanel Id="SlidersWindowInnerPanel" WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" StackLayout.LayoutMethod="VerticalBottomToTop" MarginLeft="15" MarginRight="15">
			  <Children>
				<ListPanel WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" StackLayout.LayoutMethod="VerticalBottomToTop" MarginBottom="5">
				  <Children>
					<!--Title-->
					<AutoHideRichTextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" MarginTop="10" Brush="Popup.Title.Text" MinHeight="50" Text="@TitleText" WidgetToHideIfEmpty="..\TitleDivider" />
					<!--Divider-->
					<Widget Id="TitleDivider" WidthSizePolicy="StretchToParent" HeightSizePolicy="Fixed" SuggestedHeight="23" Sprite="StdAssets\Popup\divider" />
				  </Children>
				</ListPanel>
				
				<ListPanel DataSource="{ItemList}" WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" StackLayout.LayoutMethod="VerticalBottomToTop">
					<ItemTemplate>
						<ListPanel WidthSizePolicy="CoverChildren" HeightSizePolicy="Fixed" SuggestedHeight="!PartyRow.Height" MarginTop="!PartyRow.Spacing" UpdateChildrenStates="true" StackLayout.LayoutMethod="HorizontalLeftToRight">
							<Children>
								<!-- Group Name Text -->
								<TextWidget WidthSizePolicy="Fixed" HeightSizePolicy="StretchToParent" SuggestedWidth="220" HorizontalAlignment="Left" VerticalAlignment="Bottom" Brush="PartyAI.Menu.PartyRowText" Text="@GroupNameText"/>

								<!-- Party Composition Targets -->
								<PartyAICompositionDisplay Parameter.DataSource="{Composition}" HorizontalAlignment="Left" HeightSizePolicy="Fixed" SuggestedHeight="!PartyRow.Height" WidthSizePolicy="Fixed" SuggestedWidth="375" />
								
								<!-- Edit Party Composition -->
								<ButtonWidget DoNotPassEventsToChildren="true" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="!PartyRow.Height" SuggestedHeight="!PartyRow.Height" MarginLeft="-55" UpdateChildrenStates="true" Command.Click='EditComposition'>
								  <Children>
									<HintWidget DataSource="{EditHint}" WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" Command.HoverBegin="ExecuteBeginHint" Command.HoverEnd="ExecuteEndHint" />
									<BrushWidget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="!PartyRow.Height" SuggestedHeight="!PartyRow.Height" HorizontalAlignment="Right" VerticalAlignment="Center" Brush="PartyAI.Menu.EditButton" />
								  </Children>
								</ButtonWidget>
								
								<!-- Template Name -->
								<TextWidget WidthSizePolicy="Fixed" HeightSizePolicy="StretchToParent" MarginLeft="20" MarginRight="20" SuggestedWidth="150" HorizontalAlignment="Left" VerticalAlignment="Bottom" Brush="PartyAI.Menu.PartyRowText" Brush.TextHorizontalAlignment="Right" Text="@TemplateName"/>
								
								<!-- Edit Party Template -->
								<ButtonWidget DoNotPassEventsToChildren="true" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="!PartyRow.Height" SuggestedHeight="!PartyRow.Height" MarginLeft="-10" UpdateChildrenStates="true" Command.Click='EditPartyTemplate'>
								  <Children>
									<HintWidget DataSource="{ChangeHint}" WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" Command.HoverBegin="ExecuteBeginHint" Command.HoverEnd="ExecuteEndHint" />
									<BrushWidget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="!PartyRow.Height" SuggestedHeight="!PartyRow.Height" HorizontalAlignment="Right" VerticalAlignment="Center" Brush="PartyAI.Menu.EditButton" />
								  </Children>
								</ButtonWidget>
								
								<!-- Edit Party Options -->
								<ButtonWidget DoNotPassEventsToChildren='true' WidthSizePolicy='CoverChildren' HeightSizePolicy='Fixed' SuggestedHeight='!PartyRow.Height' Brush='ButtonBrush2' VerticalAlignment="Bottom" HorizontalAlignment='Left' UpdateChildrenStates='true' MarginLeft="40" MarginRight="25" Command.Click='EditPartyOptions'>
									<Children>
										<TextWidget WidthSizePolicy='CoverChildren' HeightSizePolicy='StretchToParent' Brush='Kingdom.GeneralButtons.Text' Text='@OptionsText' />
									</Children>
								</ButtonWidget>
							</Children>
						</ListPanel>
					</ItemTemplate>
				</ListPanel>

				<ListPanel WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" HorizontalAlignment="Center" MarginTop="20" StackLayout.LayoutMethod="HorizontalLeftToRight">
				  <Children>
					<ToggleButtonWidget DoNotPassEventsToChildren="true" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="251" SuggestedHeight="64" HorizontalAlignment="Right" VerticalAlignment="Center" Brush="Popup.Cancel.Button" Command.Click="CancelEditDefaultSettings" GamepadNavigationIndex="0">
					  <Children>
						<TextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" Brush="Popup.Button.Text" Text="@CancelText" MarginLeft="40" MarginRight="40"/>
					  </Children>
					</ToggleButtonWidget>
					<ToggleButtonWidget DoNotPassEventsToChildren="true" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="251" SuggestedHeight="64" HorizontalAlignment="Right" VerticalAlignment="Center" Brush="Popup.Done.Button" Command.Click="AcceptEditDefaultSettings" GamepadNavigationIndex="1">
					  <Children>
						<TextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" Brush="Popup.Button.Text" Text="@AcceptText" MarginLeft="40" MarginRight="40"/>
					  </Children>
					</ToggleButtonWidget>
				  </Children>
				</ListPanel>
			  </Children>
			</ListPanel>
			<!--Frame Border-->
			<BrushWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" Brush="Popup.Frame" IsEnabled="false" />

		  </Children>
		</DimensionSyncWidget>
	  </Children>
	</Widget>
  </Window>
</Prefab>
